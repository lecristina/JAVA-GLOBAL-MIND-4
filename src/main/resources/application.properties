# Application
spring.application.name=nexus
server.port=8080

# Oracle Database - Configuração padrão
# Host correto: oracle.fiap.com.br (conforme sua conexão)
spring.datasource.url=${DB_URL:jdbc:oracle:thin:@oracle.fiap.com.br:1521:ORCL}
spring.datasource.username=${DB_USERNAME:rm555241}
spring.datasource.password=${DB_PASSWORD:230205}
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# JPA
# Temporariamente em 'update' para criar tabelas faltantes automaticamente
# Após criar todas as tabelas, altere de volta para 'validate'
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.OracleDialect
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
# Garantir que as transações sejam commitadas automaticamente
spring.jpa.properties.hibernate.connection.provider_disables_autocommit=false
spring.transaction.default-timeout=30

# JWT
jwt.secret=MindTrackNexusSecretKeyForJWTTokenGeneration2024SecureKey
jwt.expiration=86400000

# Cache
spring.cache.type=caffeine
spring.cache.cache-names=humor,sprints,habitos,badges

# Desabilitar autoconfiguração do HttpClient do Spring Boot (resolve conflito com OpenAI SDK)
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.http.client.HttpClientAutoConfiguration

# RabbitMQ (opcional - não será carregado se não estiver configurado)
# spring.rabbitmq.host=localhost
# spring.rabbitmq.port=5672
# spring.rabbitmq.username=guest
# spring.rabbitmq.password=guest
# spring.rabbitmq.queue.burnout-alert=burnout.alert.queue

# Spring AI (OpenAI)
# ⚠️ ATENÇÃO: API Key configurada para desenvolvimento/teste
# Para produção, use variável de ambiente OPENAI_API_KEY
# Esta API key está aqui apenas para facilitar testes locais
# Configure via variável de ambiente: export OPENAI_API_KEY=sua-chave-aqui
spring.ai.openai.api-key=${OPENAI_API_KEY:}
spring.ai.openai.chat.options.model=gpt-4o-mini
spring.ai.openai.chat.options.temperature=0.7
# OpenAI Assistant ID (não usado - sempre usa Chat Completions)
openai.assistant.id=${OPENAI_ASSISTANT_ID:asst_4GbxV6oIhBqswUNgKgW6Ustd}

# Google Gemini API (Alternativa gratuita - Fallback quando OpenAI não disponível)
# Obtenha sua API key em: https://makersuite.google.com/app/apikey
# A API é GRATUITA até certo limite (60 requisições/minuto)
gemini.api-key=${GEMINI_API_KEY:}
gemini.model=gemini-pro

# Visão Computacional (Hugging Face)
vision.huggingface.api-url=${HUGGINGFACE_API_URL:https://api-inference.huggingface.co/models/google/vit-base-patch16-224}
vision.huggingface.model=${HUGGINGFACE_MODEL:google/vit-base-patch16-224}

# Internationalization
spring.web.locale=pt_BR
spring.web.locale-resolver=fixed
spring.messages.basename=messages
spring.messages.encoding=UTF-8

# Swagger
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.tryItOutEnabled=true
springdoc.default-produces-media-type=application/json
springdoc.default-consumes-media-type=application/json
springdoc.show-actuator=false
springdoc.use-management-port=false

# Logging
logging.level.com.nexus=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG

# Spring Boot DevTools - Desabilitar restart automático para evitar problemas de classloader
spring.devtools.restart.enabled=false
